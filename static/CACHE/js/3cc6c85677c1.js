function draw_sales_distribution(data,threshold){var res=merge_lower_sales(data,threshold);Highcharts.setOptions({lang:{drillUpText:'Back',}});var options={chart:{backgroundColor:'#f5f5f5',type:'pie',height:250,},title:{text:'Sales Distribution Chart'},xAxis:{categories:true},drilldown:{series:[{id:'others',name:'Others',data:res[0]}]},legend:{itemStyle:{cursor:'pointer',color:'#274b6d',fontSize:'8.5px'},align:'right',verticalAlign:'top',x:-5,y:100,layout:'vertical'},plotOptions:{pie:{borderWidth:1.5,borderColor:'#000000',},series:{dataLabels:{enabled:false},shadow:false,showInLegend:true}},series:[{name:'value',colorByPoint:true,data:res[1]}]};options.chart.renderTo='sales_distribution_chart';var chart2=new Highcharts.Chart(options);}
function merge_lower_sales(data,threshold){var amounts=[],together=[],lesser=[],greater=[];for(var i=0;i<data.length;i++){var tog=new Object();amounts.push(data[i]['cr']);if(data[i]['name']=='Sales'){tog.name=data[i]['name']}
else{tog.name=data[i]['name'].replace(/Sales/g,'');}
tog.cr=data[i]['cr'];together.push(tog);}
var total=function(arr){tot=0;for(var j=0;j<arr.length;j++){tot+=arr[j];}
return tot;};var mytot=total(amounts);var thres=threshold*mytot/100;var less_tot=0;for(var i=0;i<together.length;i++){var temparr=[]
if(together[i]['cr']<thres){temparr.push(together[i]['name']);temparr.push(together[i]['cr']);lesser.push(temparr);less_tot+=together[i]['cr'];}
else{var tempobj=new Object();tempobj.name=together[i]['name'];tempobj.y=together[i]['cr'];greater.push(tempobj);}}
greater.push({name:'Others',y:less_tot,drilldown:'others'});return[lesser,greater];}
function draw_income_expense(data){$('#income_expense_chart').highcharts({chart:{type:'column',backgroundColor:"#f5f5f5",},title:{align:'center',text:'Income Expense Chart',style:{fontSize:'15px',}},yAxis:{min:0,title:{text:'Amount'}},plotOptions:{series:{pointPadding:0.01,borderWidth:1,shadow:false}},series:[{name:'Income',data:[data['income']]},{name:'Expense',data:[data['expense']]}]});}
function draw_sales_chart(ssum,nname){var summ=ssum.reverse();var name=nname.reverse();$('#sales_chart').highcharts({chart:{backgroundColor:"#f5f5f5",},title:{text:'Sales Chart',},xAxis:{categories:name},yAxis:{title:{text:'Amount'},min:0,plotLines:[{value:0,width:1,color:'#ff8078'}]},legend:{layout:'vertical',align:'bottom',verticalAlign:'bottom',x:100,y:0,borderWidth:0},series:[{name:'Sales',data:summ}]});}
function draw_income_expense_drilldown_chart(data){var mon_name_inc=data['mon_name_inc'].reverse();var mon_name_exp=data['mon_name_exp'].reverse();var mon_data_inc=data['mon_inc'].reverse();var mon_data_exp=data['mon_exp'].reverse();var tog_inc=[],tog_exp=[];for(var i=0;i<mon_data_inc.length;i++){var temp1=[],temp2=[];temp1.push(mon_name_inc[i]);temp1.push(mon_data_inc[i]);tog_inc.push(temp1);temp2.push(mon_name_exp[i]);temp2.push(mon_data_exp[i]);tog_exp.push(temp2);}
$('#income_expense_drilldown_chart').highcharts({chart:{backgroundColor:'#f5f5f5',type:'column'},title:{text:'Income Expense drilldown'},xAxis:{categories:true},drilldown:{series:[{id:'income',name:'Income',data:tog_inc},{id:'expense',name:'Expense',data:tog_exp}]},legend:{enabled:false},plotOptions:{series:{pointPadding:0.01,dataLabels:{enabled:true},shadow:false}},series:[{name:'Value',colorByPoint:true,data:[{name:'Income',y:data['tot_inc'],drilldown:'income'},{name:'Expense',y:data['tot_exp'],drilldown:'expense'}]}]});}
$(document).ready(function(){$('.date-picker').datepicker({autoclose:true});$('#day-journal-selection-button').on('click',function(){window.location='/day/'+$('#day-journal-date').val();});$(function(){$('.flip-container').mouseenter(function(){$(this).find('.flip-body').addClass('open');});$('.flip-container').mouseleave(function(){if(!$('.datepicker').is(":visible")){$(this).find('.flip-body').removeClass('open');}});});});